{% extends 'base.html' %}

{% block title %}Admin Dashboard - Flight Management System{% endblock %}

{% block extra_css %}
<style>
    .dashboard-card {
        border: 0;
        border-radius: 1rem;
        box-shadow: 0 0.5rem 1rem 0 rgba(0, 0, 0, 0.05);
        background-color: #ffffff;
        height: 100%;
        transition: transform 0.2s;
    }
    .dashboard-card:hover {
        transform: translateY(-5px);
    }
</style>
{% endblock %}

{% block content %}
    <div class="mb-4">
        <h2>Welcome, Admin!</h2>
        <p class="text-muted">Manage all system operations from here.</p>
    </div>

    <div class="d-flex justify-content-between align-items-center mb-3">
        <h3 class="h4 mb-0">System Overview</h3>
        <div class="col-md-4">
            <form method="GET">
                <div class="input-group">
                    <select class="form-select" name="duration" id="statsDuration">
                        <option value="day" {% if selected_duration == 'day' %}selected{% endif %}>Past Day</option>
                        <option value="week" {% if selected_duration == 'week' %}selected{% endif %}>Past Week</option>
                        <option value="month" {% if selected_duration == 'month' %}selected{% endif %}>Past Month</option>
                        <option value="3month" {% if selected_duration == '3month' %}selected{% endif %}>Past 3 Months</option>
                        <option value="year" {% if selected_duration == 'year' %}selected{% endif %}>Past Year</option>
                    </select>
                    <button class="btn btn-primary" type="submit">Update</button>
                </div>
            </form>
        </div>
    </div>
    
    <div class="row g-4 mb-5">
        
        <div class="col-md-4">
            <div class="card dashboard-card">
                <div class="card-body p-4">
                    <div class="d-flex align-items-center">
                        <div class="flex-grow-1 me-3">
                            <div class="text-muted text-uppercase small fw-bold">Total Flights</div>
                            <h3 class="mb-0 fw-bold text-dark">{{ total_flights }}</h3>
                        </div>
                        <div class="fs-1 text-primary opacity-50">
                            <i class="bi bi-airplane-engines"></i>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="col-md-4">
            <div class="card dashboard-card">
                <div class="card-body p-4">
                    <div class="d-flex align-items-center">
                        <div class="flex-grow-1 me-3">
                            <div class="text-muted text-uppercase small fw-bold">Total Bookings</div>
                            <h3 class="mb-0 fw-bold text-dark">{{ total_bookings }}</h3>
                        </div>
                        <div class="fs-1 text-success opacity-50">
                            <i class="bi bi-journal-check"></i>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="col-md-4">
            <div class="card dashboard-card">
                <div class="card-body p-4">
                    <div class="d-flex align-items-center">
                        <div class="flex-grow-1 me-3">
                            <div class="text-muted text-uppercase small fw-bold">Cancellations</div>
                            <h3 class="mb-0 fw-bold text-dark">{{ cancellations }}</h3>
                        </div>
                        <div class="fs-1 text-danger opacity-50">
                            <i class="bi bi-x-circle"></i>
                        </div>
                    </div>
                </div>
            </div>
        </div>

    </div>

    <h3 class="h4 mb-3">Management Portal</h3>
    <div class="row g-4">
        <div class="col-lg-6">
            <div class="card dashboard-card">
                <div class="card-body p-4 p-sm-5">
                    <h4 class="card-title mb-3"><i class="bi bi-plus-circle me-2"></i> Create New Flight</h4>
                    <p class="card-text text-muted">
                        Add a new flight to the system with its schedule, aircraft, and seat inventory.
                    </p>
                    <a href="{% url 'add_new_flight' %}" class="btn btn-primary btn-lg mt-3 shadow-sm">
                        Add New Flight <i class="bi bi-arrow-right-short"></i>
                    </a>
                </div>
            </div>
        </div>
        
        <div class="col-lg-6">
            <div class="card dashboard-card">
                <div class="card-body p-4 p-sm-5">
                    <h4 class="card-title mb-3"><i class="bi bi-airplane me-2"></i>View Flights</h4>
                    <p class="card-text text-muted">
                        View, edit, cancel, or delay existing flights.
                    </p>
                    <a href="{% url 'view_flights' %}" class="btn btn-primary btn-lg mt-3 shadow-sm">
                        View Flights <i class="bi bi-arrow-right-short"></i>
                    </a>
                </div>
            </div>
        </div>

        <div class="col-lg-6">
            <div class="card dashboard-card">
                <div class="card-body p-4 p-sm-5">
                    <h4 class="card-title mb-3"><i class="bi bi-file-earmark-bar-graph me-2"></i> Reports Generation</h4>
                    <p class="card-text text-muted">
                        Generate and view reports for bookings, available flights, cancellations, and other key metrics.
                    </p>
                    <a href="{% url 'admin_view_reports' %}" class="btn btn-primary btn-lg mt-3 shadow-sm">
                        Generate Reports <i class="bi bi-arrow-right-short"></i>
                    </a>
                </div>
            </div>
        </div>

    </div> 
{% endblock %}